<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>events: afcgi.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>afcgi.h File Reference</h1><code>#include &lt;stdint.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;events.h&gt;</code><br>
<code>#include &lt;rotbuffer.h&gt;</code><br>

<p>
Include dependency graph for afcgi.h:<p><center><img src="afcgi_8h__incl.png" border="0" usemap="#afcgi.h_map" alt=""></center>

<p>
<a href="afcgi_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>afcgi_hdr</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>afcgi_sess</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>afcgi</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>afcgi_binder</b></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#600d12d2fb6d3ade3a6c12ee81ce6258">afcgi_set_callback</a>(sess, name, cb)&nbsp;&nbsp;&nbsp;afcgi_set_cb_ ## name(sess, cb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#4fff298840aad5ab0d512794875b4552">AFCGI_MAX_LOG_LEVEL</a>&nbsp;&nbsp;&nbsp;LOG_WARNING</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#e2e27a334efd3ccea9b24b6e2ba7650d">afcgi_logmsg</a>(priority, fmt, args...)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*)&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#f000732bbd43e116fc79b3df21b4cc24">afcgi_cb</a> (struct afcgi_sess *s, void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*)&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#93f6572599ed698843bb784af2d5f5d7">afcgi_cb_data</a> (struct afcgi_sess *s, void *arg, int len)</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb561">afcgi_callback_names</a> { <br>
&nbsp;&nbsp;<a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb561d8bef4ca5eea023f5c819e10b2715178">ON_HEADERS</a> =  0, 
<a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb5611b1942d8facd827925bed32447074a55">ON_RECEIVE</a>, 
<a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb5616ed9326d024ac5e28c72ead8937541ed">ON_DATA_RECV</a>, 
<a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb561f2e478cdae2a1052a6a947cb9a395fef">ON_RUN</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb561f4aa060d45dfba04fbb799c1e1bad42a">ON_END_OF_DATA</a>, 
<a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb5611005c3bab3b504c0d1bd50ea66eb2492">ON_WRITE</a>, 
<a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb5612e24b5c4b5e4754d6c1c7e541f652f59">ON_ABORT</a>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e03">afcgi_return_status</a> { <a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e03d92094365bc939d58eb7e70d876ad5c1">AFCGI_REQUEST_COMPLETE</a> =  0, 
<a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e03474cc75bf90a78f727d01cc08aaad67c">AFCGI_CANT_MPX_CONN</a> =  1, 
<a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e038d31b2b546b5532473f48e1fe5e33041">AFCGI_OVERLOADED</a> =  2, 
<a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e03733efa32d95547a2cde8cec91d7f4117">AFCGI_UNKNOWN_ROLE</a> =  3
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#bc63f6c57662fecaccb3fd7b9ba1b0e1">afcgi_init</a> (int maxconn, struct ev_timeout_basic_node *tm)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#4a6ac5e0fb32cf2b952ce1c2bae08fa4">afcgi_bind</a> (char *bind, <a class="el" href="afcgi_8h.html#f000732bbd43e116fc79b3df21b4cc24">afcgi_cb</a> on_new, void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#4247fc3dc720e54ed029d1cd97166d6e">afcgi_loop</a> (int loop)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#c83cbfe4c67ddf9ca6a747cba25944c3">afcgi_set_arg</a> (struct afcgi_sess *s, void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct afcgi_hdr *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#18d31d8aab541baaf7d1b9cdfc94a031">afcgi_search_header</a> (struct afcgi_sess *s, char *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#6154625a3d09a43dd43807a76e492f95">afcgi_search_header_str</a> (struct afcgi_sess *s, char *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#f8a3aa29d940f0c84418792b51347d40">afcgi_want_write</a> (struct afcgi_sess *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#8757dbf0dc4d2be26413023049483bb7">afcgi_stop_write</a> (struct afcgi_sess *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#bbb6c6daea7005fce3c408cc8b6aac9a">afcgi_write</a> (struct afcgi_sess *s, char *buff, int len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#ca488a5e2137232ac85c412720f1f92f">afcgi_end</a> (struct afcgi_sess *s, enum <a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e03">afcgi_return_status</a> rs, int rc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#b818d636e0664a063701cf976e1c3f86">__afcgi_logmsg</a> (int priority, const char *file, const char *function, int line, char *fmt,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="afcgi_8h.html#172560b077b09e3edd5cc05ca3643e20">beweb_set_log_opt</a> (uint32_t flags,...)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="e2e27a334efd3ccea9b24b6e2ba7650d"></a><!-- doxytag: member="afcgi.h::afcgi_logmsg" ref="e2e27a334efd3ccea9b24b6e2ba7650d" args="(priority, fmt, args...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define afcgi_logmsg          </td>
          <td>(</td>
          <td class="paramtype">priority,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fmt,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">args...&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">{ \
                <span class="keywordflow">if</span> ( (priority) &lt;= <a class="code" href="afcgi_8h.html#4fff298840aad5ab0d512794875b4552">AFCGI_MAX_LOG_LEVEL</a> ) { \
                        <a class="code" href="afcgi_8h.html#b818d636e0664a063701cf976e1c3f86">__afcgi_logmsg</a>((priority), \
                              __FILE__, __FUNCTION__, __LINE__, (fmt), ##args); \
                } \
        }
</pre></div>send log message. is recomended to use for compilation code simplification<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>priority</em>&nbsp;</td><td>log level from LOG_DEBUG to LOG_EMERG </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>log format: ex: "open file %s" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args...</em>&nbsp;</td><td>args for log format </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4fff298840aad5ab0d512794875b4552"></a><!-- doxytag: member="afcgi.h::AFCGI_MAX_LOG_LEVEL" ref="4fff298840aad5ab0d512794875b4552" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AFCGI_MAX_LOG_LEVEL&nbsp;&nbsp;&nbsp;LOG_WARNING          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
all debug logs with level &gt; AFCGI_MAX_LOG_LEVEL are not compiled redifine this define with compilation option for build binary in debug mode or in normal mode 
</div>
</div><p>
<a class="anchor" name="600d12d2fb6d3ade3a6c12ee81ce6258"></a><!-- doxytag: member="afcgi.h::afcgi_set_callback" ref="600d12d2fb6d3ade3a6c12ee81ce6258" args="(sess, name, cb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define afcgi_set_callback          </td>
          <td>(</td>
          <td class="paramtype">sess,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">name,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cb&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;afcgi_set_cb_ ## name(sess, cb)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set callback <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sess</em>&nbsp;</td><td>fascgi session identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>callback name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cb</em>&nbsp;</td><td>calback pointer </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="f000732bbd43e116fc79b3df21b4cc24"></a><!-- doxytag: member="afcgi.h::afcgi_cb" ref="f000732bbd43e116fc79b3df21b4cc24" args="(struct afcgi_sess *s, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(*) <a class="el" href="afcgi_8h.html#f000732bbd43e116fc79b3df21b4cc24">afcgi_cb</a>(struct afcgi_sess *s, void *arg)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
used for standard afcgi callbacks <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>is afcgi session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>is easy argument </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="93f6572599ed698843bb784af2d5f5d7"></a><!-- doxytag: member="afcgi.h::afcgi_cb_data" ref="93f6572599ed698843bb784af2d5f5d7" args="(struct afcgi_sess *s, void *arg, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(*) <a class="el" href="afcgi_8h.html#93f6572599ed698843bb784af2d5f5d7">afcgi_cb_data</a>(struct afcgi_sess *s, void *arg, int len)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
used for standard afcgi input callbacks <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>is afcgi session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>is easy argument </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>is data length </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb561"></a><!-- doxytag: member="afcgi.h::afcgi_callback_names" ref="e9382f0ce76b67a2a9dd4c19353cb561" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="afcgi_8h.html#e9382f0ce76b67a2a9dd4c19353cb561">afcgi_callback_names</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The names of the different callbacks <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb561d8bef4ca5eea023f5c819e10b2715178"></a><!-- doxytag: member="ON_HEADERS" ref="e9382f0ce76b67a2a9dd4c19353cb561d8bef4ca5eea023f5c819e10b2715178" args="" -->ON_HEADERS</em>&nbsp;</td><td>
Called when all headers was received </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb5611b1942d8facd827925bed32447074a55"></a><!-- doxytag: member="ON_RECEIVE" ref="e9382f0ce76b67a2a9dd4c19353cb5611b1942d8facd827925bed32447074a55" args="" -->ON_RECEIVE</em>&nbsp;</td><td>
Called when STDIN stream packet was ready </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb5616ed9326d024ac5e28c72ead8937541ed"></a><!-- doxytag: member="ON_DATA_RECV" ref="e9382f0ce76b67a2a9dd4c19353cb5616ed9326d024ac5e28c72ead8937541ed" args="" -->ON_DATA_RECV</em>&nbsp;</td><td>
Called when DATA stream packet was ready </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb561f2e478cdae2a1052a6a947cb9a395fef"></a><!-- doxytag: member="ON_RUN" ref="e9382f0ce76b67a2a9dd4c19353cb561f2e478cdae2a1052a6a947cb9a395fef" args="" -->ON_RUN</em>&nbsp;</td><td>
Called when all STDIN packets was sent </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb561f4aa060d45dfba04fbb799c1e1bad42a"></a><!-- doxytag: member="ON_END_OF_DATA" ref="e9382f0ce76b67a2a9dd4c19353cb561f4aa060d45dfba04fbb799c1e1bad42a" args="" -->ON_END_OF_DATA</em>&nbsp;</td><td>
Called when all DATA packets was sent </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb5611005c3bab3b504c0d1bd50ea66eb2492"></a><!-- doxytag: member="ON_WRITE" ref="e9382f0ce76b67a2a9dd4c19353cb5611005c3bab3b504c0d1bd50ea66eb2492" args="" -->ON_WRITE</em>&nbsp;</td><td>
Called when application can write on STDIN, STDERR </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e9382f0ce76b67a2a9dd4c19353cb5612e24b5c4b5e4754d6c1c7e541f652f59"></a><!-- doxytag: member="ON_ABORT" ref="e9382f0ce76b67a2a9dd4c19353cb5612e24b5c4b5e4754d6c1c7e541f652f59" args="" -->ON_ABORT</em>&nbsp;</td><td>
Called when server sent abort </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="25faf6dd1593c6a9c4577f9166578e03"></a><!-- doxytag: member="afcgi.h::afcgi_return_status" ref="25faf6dd1593c6a9c4577f9166578e03" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e03">afcgi_return_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return status <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="25faf6dd1593c6a9c4577f9166578e03d92094365bc939d58eb7e70d876ad5c1"></a><!-- doxytag: member="AFCGI_REQUEST_COMPLETE" ref="25faf6dd1593c6a9c4577f9166578e03d92094365bc939d58eb7e70d876ad5c1" args="" -->AFCGI_REQUEST_COMPLETE</em>&nbsp;</td><td>
normal end of request. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="25faf6dd1593c6a9c4577f9166578e03474cc75bf90a78f727d01cc08aaad67c"></a><!-- doxytag: member="AFCGI_CANT_MPX_CONN" ref="25faf6dd1593c6a9c4577f9166578e03474cc75bf90a78f727d01cc08aaad67c" args="" -->AFCGI_CANT_MPX_CONN</em>&nbsp;</td><td>
rejecting a new request. This happens when a Web server sends concurrent requests over one connection to an application that is designed to process one request at a time per connection. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="25faf6dd1593c6a9c4577f9166578e038d31b2b546b5532473f48e1fe5e33041"></a><!-- doxytag: member="AFCGI_OVERLOADED" ref="25faf6dd1593c6a9c4577f9166578e038d31b2b546b5532473f48e1fe5e33041" args="" -->AFCGI_OVERLOADED</em>&nbsp;</td><td>
rejecting a new request. This happens when the application runs out of some resource, e.g. database connections. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="25faf6dd1593c6a9c4577f9166578e03733efa32d95547a2cde8cec91d7f4117"></a><!-- doxytag: member="AFCGI_UNKNOWN_ROLE" ref="25faf6dd1593c6a9c4577f9166578e03733efa32d95547a2cde8cec91d7f4117" args="" -->AFCGI_UNKNOWN_ROLE</em>&nbsp;</td><td>
rejecting a new request. This happens when the Web server has specified a role that is unknown to the application. </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="b818d636e0664a063701cf976e1c3f86"></a><!-- doxytag: member="afcgi.h::__afcgi_logmsg" ref="b818d636e0664a063701cf976e1c3f86" args="(int priority, const char *file, const char *function, int line, char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __afcgi_logmsg           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
send log message. is recomended to use macro<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>priority</em>&nbsp;</td><td>log level from LOG_DEBUG to LOG_EMERG </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>code filename </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>function</em>&nbsp;</td><td>code function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>line</em>&nbsp;</td><td>code line </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>log format: ex: "open file %s" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>args for log format </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4a6ac5e0fb32cf2b952ce1c2bae08fa4"></a><!-- doxytag: member="afcgi.h::afcgi_bind" ref="4a6ac5e0fb32cf2b952ce1c2bae08fa4" args="(char *bind, afcgi_cb on_new, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int afcgi_bind           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>bind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afcgi_8h.html#f000732bbd43e116fc79b3df21b4cc24">afcgi_cb</a>&nbsp;</td>
          <td class="paramname"> <em>on_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bind network address or socket <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bind</em>&nbsp;</td><td>network address or socket (or NULL for stdin) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>on_new</em>&nbsp;</td><td>callback called for new connexion </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>easy arg </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>if ok return 0, else return &lt; 0 </dd></dl>

</div>
</div><p>
<a class="anchor" name="ca488a5e2137232ac85c412720f1f92f"></a><!-- doxytag: member="afcgi.h::afcgi_end" ref="ca488a5e2137232ac85c412720f1f92f" args="(struct afcgi_sess *s, enum afcgi_return_status rs, int rc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void afcgi_end           </td>
          <td>(</td>
          <td class="paramtype">struct afcgi_sess *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="afcgi_8h.html#25faf6dd1593c6a9c4577f9166578e03">afcgi_return_status</a>&nbsp;</td>
          <td class="paramname"> <em>rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
afcgi session end <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>afcgi session identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rs</em>&nbsp;</td><td>return status </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rc</em>&nbsp;</td><td>return code </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="bc63f6c57662fecaccb3fd7b9ba1b0e1"></a><!-- doxytag: member="afcgi.h::afcgi_init" ref="bc63f6c57662fecaccb3fd7b9ba1b0e1" args="(int maxconn, struct ev_timeout_basic_node *tm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void afcgi_init           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ev_timeout_basic_node *&nbsp;</td>
          <td class="paramname"> <em>tm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
init fcgi internals and poller system <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>maxconn</em>&nbsp;</td><td>The maximun of connection expected (all sockets) -1: use the max limit (ulimit -n) &gt;0: use this value, ans set limit </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tm</em>&nbsp;</td><td>The timeout tree pointer from lib events </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4247fc3dc720e54ed029d1cd97166d6e"></a><!-- doxytag: member="afcgi.h::afcgi_loop" ref="4247fc3dc720e54ed029d1cd97166d6e" args="(int loop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void afcgi_loop           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>loop</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
afcgi main loop. This launched the main loop after initialization <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>loop</em>&nbsp;</td><td>(boolean) 0: the function return, 1: the function never return </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="18d31d8aab541baaf7d1b9cdfc94a031"></a><!-- doxytag: member="afcgi.h::afcgi_search_header" ref="18d31d8aab541baaf7d1b9cdfc94a031" args="(struct afcgi_sess *s, char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct afcgi_hdr* afcgi_search_header           </td>
          <td>(</td>
          <td class="paramtype">struct afcgi_sess *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
search header <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>afcgi session identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>header name (case insensitive </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>header if found, NULL if not found </dd></dl>

</div>
</div><p>
<a class="anchor" name="6154625a3d09a43dd43807a76e492f95"></a><!-- doxytag: member="afcgi.h::afcgi_search_header_str" ref="6154625a3d09a43dd43807a76e492f95" args="(struct afcgi_sess *s, char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* afcgi_search_header_str           </td>
          <td>(</td>
          <td class="paramtype">struct afcgi_sess *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
search header, return string format <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>afcgi session identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>header name (case insensitive </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>char *header if found, NULL if not found </dd></dl>

</div>
</div><p>
<a class="anchor" name="c83cbfe4c67ddf9ca6a747cba25944c3"></a><!-- doxytag: member="afcgi.h::afcgi_set_arg" ref="c83cbfe4c67ddf9ca6a747cba25944c3" args="(struct afcgi_sess *s, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void afcgi_set_arg           </td>
          <td>(</td>
          <td class="paramtype">struct afcgi_sess *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set easy argument <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>fascgi session identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>easy argument </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8757dbf0dc4d2be26413023049483bb7"></a><!-- doxytag: member="afcgi.h::afcgi_stop_write" ref="8757dbf0dc4d2be26413023049483bb7" args="(struct afcgi_sess *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void afcgi_stop_write           </td>
          <td>(</td>
          <td class="paramtype">struct afcgi_sess *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
afcgi session do not write more <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>afcgi session identifier </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="f8a3aa29d940f0c84418792b51347d40"></a><!-- doxytag: member="afcgi.h::afcgi_want_write" ref="f8a3aa29d940f0c84418792b51347d40" args="(struct afcgi_sess *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void afcgi_want_write           </td>
          <td>(</td>
          <td class="paramtype">struct afcgi_sess *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
afcgi session want's write <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>afcgi session identifier </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="bbb6c6daea7005fce3c408cc8b6aac9a"></a><!-- doxytag: member="afcgi.h::afcgi_write" ref="bbb6c6daea7005fce3c408cc8b6aac9a" args="(struct afcgi_sess *s, char *buff, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int afcgi_write           </td>
          <td>(</td>
          <td class="paramtype">struct afcgi_sess *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
write data <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>afcgi session identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buff</em>&nbsp;</td><td>buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>buffer len </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>size writed </dd></dl>

</div>
</div><p>
<a class="anchor" name="172560b077b09e3edd5cc05ca3643e20"></a><!-- doxytag: member="afcgi.h::beweb_set_log_opt" ref="172560b077b09e3edd5cc05ca3643e20" args="(uint32_t flags,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void beweb_set_log_opt           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set log modes<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>flags,:</em>&nbsp;</td><td>can takes this values:</td></tr>
  </table>
</dl>
<ul>
<li>AFCGI_LOG_STDERR log on stderr output</li><li>AFCGI_LOG_SYSLOG log on syslog, this option require 3 parameters<ul>
<li>(char *) program name (generally the same AFCGI_LOG_DSP_APP_NAME)</li><li>(int) log pid ? : 1=&gt;yes, 0=&gt;no</li><li>(int) the facility code:<ul>
<li>LOG_KERN : kernel messages</li><li>LOG_USER : random user-level messages</li><li>LOG_MAIL : mail system</li><li>LOG_DAEMON : system daemons</li><li>LOG_AUTH : security/authorization messages</li><li>LOG_SYSLOG : messages generated internally by syslogd</li><li>LOG_LPR : line printer subsystem</li><li>LOG_NEWS : network news subsystem</li><li>LOG_UUCP : UUCP subsystem</li><li>LOG_CRON : clock daemon</li><li>LOG_AUTHPRIV : security/authorization messages (private)</li><li>LOG_FTP : ftp daemon</li><li>LOG_LOCAL0 : reserved for local use</li><li>LOG_LOCAL1 : reserved for local use</li><li>LOG_LOCAL2 : reserved for local use</li><li>LOG_LOCAL3 : reserved for local use</li><li>LOG_LOCAL4 : reserved for local use</li><li>LOG_LOCAL5 : reserved for local use</li><li>LOG_LOCAL6 : reserved for local use</li><li>LOG_LOCAL7 : reserved for local use</li></ul>
</li></ul>
</li></ul>
<p>
<ul>
<li>AFCGI_LOG_DSP_LOG_LEVEL display only loglevel upper than the parameter. This option require 1 parameter:<ul>
<li>(int) loglevel. default: LOG_WARNING</li></ul>
</li></ul>
<p>
<ul>
<li>AFCGI_LOG_DSP_TIME display time in log</li><li>AFCGI_LOG_DSP_HOSTNAME display hostname in log</li><li>AFCGI_LOG_DSP_APP_NAME display application name in log. This option require 1 parameter<ul>
<li>(char *) application name</li></ul>
</li></ul>
<p>
<ul>
<li>AFCGI_LOG_DSP_PID display application pid in log</li><li>AFCGI_LOG_DSP_FUNCTION: log msg function name (generally used for debug)</li><li>AFCGI_LOG_DSP_FILE: log msg filename (generally used for debug)</li><li>AFCGI_LOG_DSP_LINE: log msg line (generallyused for debug) </li></ul>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue Nov 25 11:29:55 2008 for events by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
